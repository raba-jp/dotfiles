[[plugins]]
repo = 'Shougo/deoplete.nvim'
if = 'has("python3")'
hook_add = '''
  let g:deoplete#enable_at_startup = 1
  let g:deoplete#complete_method = "omnifunc"
  let g:deoplete#auto_complete_delay = 0
  let g:deoplete#auto_complete_start_length = 1
  let g:deoplete#enable_smart_case = 1
  inoremap <expr><tab>
      \ pumvisible() ? "\<C-n>" :
      \ neosnippet#expandable_or_jumpable() ? "\<Plug>(neosnippet_expand_or_jump)" :
      \ "\<tab>"
  inoremap <expr><S-TAB> pumvisible() ? "\<C-p>" : "\<C-h>"
  inoremap <expr><BS> deoplete#smart_close_popup()."\<C-h>"
  inoremap <silent> <CR> <C-r>=<SID>my_cr_function()<CR>
  function! s:my_cr_function() abort
    return deoplete#close_popup() . "\<CR>"
  endfunction
  let g:deoplete#omni#input_patterns = {}
  let g:deoplete#omni#input_patterns.ruby = ['[^. *\t]\.\w*', '[a-zA-Z_]\w*::']
  let g:deoplete#omni#functions = {}
  let g:deoplete#omni#functions.ruby = 'rubycomplete#Complete'
'''

[[plugins]]
repo = 'Shougo/neosnippet'
on_i  = 1
on_ft = 'snippet'
depends = ['neosnippet-snippets']
hook_source = '''
  imap <C-k> <Plug>(neosnippet_expand_or_jump)
  smap <C-k> <Plug>(neosnippet_expand_or_jump)
  xmap <C-k> <Plug>(neosnippet_expand_target)
  if has('conceal')
    set conceallevel=2 concealcursor=niv
  endif
'''

[[plugins]]
repo = 'Shougo/neosnippet-snippets'
on_i = 1

## Language Server Protocol
[[plugins]]
repo = 'autozimu/LanguageClient-neovim'
build = 'bash install.sh'
on_ft = ['javascript', 'typescript']
hook_source = '''
  set hidden
  let g:LanguageClient_serverCommands = {
    \ 'javascript': ['javascript-typescript-stdio'],
    \ 'typescript': ['javascript-typescript-stdio']
    \ }
'''

[[plugins]]
repo = 'uplus/deoplete-solargraph'
on_i = 1
on_ft = 'ruby'
depends = 'deoplete.nvim'

[[plugins]]
repo = 'zchee/deoplete-go'
build = 'make'
on_ft = 'go'
on_i = 1
depends = 'deoplete.nvim'
hook_add = '''
  let g:deoplete#sources#go#gocode_binary = $GOPATH . '/bin/gocode'
  let g:deoplete#sources#go#package_dot = 1
  let g:deoplete#sources#go#sort_class = ['package', 'const', 'var', 'type', 'func']
  let g:deoplete#sources#go#use_cache = 1
  let g:deoplete#sources#go#json_directory = $XDG_CACHE_HOME.'/go'
'''

## Python
[[plugins]]
repo = 'zchee/deoplete-jedi'
on_ft = 'python'
on_i = 1
depends = 'deoplete.nvim'

[[plugins]]
repo = 'ponko2/deoplete-fish'
on_ft = 'fish'
on_i = 1
depends = 'deoplete.nvim'

[[plugins]]
repo = 'Shougo/neco-vim'
on_ft = 'vim'
on_i = 1
depends = 'deoplete.nvim'
